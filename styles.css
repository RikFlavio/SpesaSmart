:root{--bg:#0a0a0f;--bg2:#141419;--bg3:#1e1e26;--border:rgba(255,255,255,0.1);--text:#fff;--text2:rgba(255,255,255,0.6);--text3:rgba(255,255,255,0.35);--accent:#22c55e;--danger:#ef4444;--r:10px;--safe-b:env(safe-area-inset-bottom,0)}
[data-theme=light]{--bg:#f2f2f7;--bg2:#fff;--bg3:#e5e5ea;--border:rgba(0,0,0,0.1);--text:#000;--text2:rgba(0,0,0,0.6);--text3:rgba(0,0,0,0.35)}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden}
body{font-family:Inter,-apple-system,sans-serif;background:var(--bg);color:var(--text);font-size:15px}
.app{display:flex;flex-direction:column;height:100%;padding-bottom:var(--safe-b)}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--bg2);border-bottom:1px solid var(--border)}
.header h1{font-size:18px;font-weight:600}
.header h1 span{color:var(--accent)}
.icon-btn{width:40px;height:40px;border:none;background:var(--bg3);border-radius:var(--r);font-size:18px;cursor:pointer}
.filters{display:flex;gap:6px;padding:10px 16px;overflow-x:auto;scrollbar-width:none}
.filters::-webkit-scrollbar{display:none}
.filters:empty{display:none}
.chip{flex-shrink:0;padding:8px 14px;background:var(--bg2);border:1px solid var(--border);border-radius:20px;color:var(--text2);font-size:13px;cursor:pointer}
.chip.active{background:var(--accent);border-color:var(--accent);color:#000}
.main{flex:1;overflow-y:auto;padding:8px 16px 16px}
.empty{text-align:center;padding:60px 20px;color:var(--text3)}
.empty span{font-size:48px;display:block;margin-bottom:12px}
.cat-group{margin-bottom:12px}
.cat-head{font-size:11px;font-weight:600;color:var(--text3);text-transform:uppercase;padding:6px 0;display:flex;align-items:center;gap:6px}
.item{display:flex;align-items:center;background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);margin-bottom:6px;height:44px;overflow:hidden}
.item-check{width:44px;height:44px;display:flex;align-items:center;justify-content:center;font-size:16px;color:var(--text3);cursor:pointer;border-right:1px solid var(--border)}
.item-check:active{background:var(--bg3)}
.item.done .item-check{color:var(--accent)}
.item-name{flex:1;padding:0 12px;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}
.item-name:active{background:var(--bg3)}
.item.done .item-name{text-decoration:line-through;opacity:.5}
.item-qty{display:flex;align-items:center;border-left:1px solid var(--border)}
.qty-btn{width:40px;height:44px;border:none;background:none;color:var(--text);font-size:20px;cursor:pointer}
.qty-btn:active{background:var(--bg3)}
.qty-val{width:24px;text-align:center;font-size:14px;font-weight:600}
.footer{padding:10px 16px;background:var(--bg2);border-top:1px solid var(--border)}
.btn-scan{width:100%;height:50px;border:none;background:var(--accent);border-radius:var(--r);color:#000;font-size:15px;font-weight:600;cursor:pointer}
.btn-scan:active{opacity:.8}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;transition:opacity .2s;z-index:100}
.overlay.active{opacity:1;pointer-events:auto}
.modal{position:fixed;left:0;right:0;bottom:0;max-height:85vh;background:var(--bg2);border-radius:16px 16px 0 0;transform:translateY(100%);transition:transform .25s;z-index:101;display:flex;flex-direction:column}
.modal.active{transform:translateY(0)}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border);font-weight:600}
.close{width:32px;height:32px;border:none;background:var(--bg3);border-radius:8px;font-size:16px;cursor:pointer;color:var(--text2)}
.modal-body{padding:16px;overflow-y:auto;flex:1}
.form-group{margin-bottom:14px}
.form-group label{display:block;font-size:12px;color:var(--text2);margin-bottom:6px}
.form-group input[type=text]{width:100%;height:44px;padding:0 12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:15px}
.form-group input:focus{outline:none;border-color:var(--accent)}
.cat-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
.cat-item{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);border:2px solid var(--border);border-radius:var(--r);cursor:pointer;font-size:18px}
.cat-item span{font-size:9px;color:var(--text3);margin-top:2px}
.cat-item.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.shop-grid{display:flex;flex-wrap:wrap;gap:6px}
.shop-item{display:flex;align-items:center;gap:6px;padding:8px 12px;background:var(--bg);border:2px solid var(--border);border-radius:var(--r);cursor:pointer;font-size:14px}
.shop-item.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.btn-primary{width:100%;height:48px;border:none;background:var(--accent);border-radius:var(--r);color:#000;font-size:15px;font-weight:600;cursor:pointer;margin-top:10px}
.btn-outline{width:100%;height:44px;border:1px solid var(--border);background:none;border-radius:var(--r);color:var(--text);font-size:14px;cursor:pointer;margin-top:10px}
.btn-link{border:none;background:none;color:var(--accent);font-size:13px;cursor:pointer;padding:8px 0}
.found{padding:12px;background:rgba(34,197,94,.1);border:1px solid var(--accent);border-radius:var(--r);margin-bottom:14px}
.found-name{font-size:16px;font-weight:600}
.found-brand{font-size:13px;color:var(--text2)}
.setting{display:flex;align-items:center;gap:12px;width:100%;padding:14px;background:var(--bg);border:none;border-radius:var(--r);color:var(--text);font-size:14px;cursor:pointer;margin-bottom:6px;text-align:left}
.setting:active{background:var(--bg3)}
.setting.danger{color:var(--danger)}
.setting input[type=file]{display:none}
#shopsList{display:flex;flex-direction:column;gap:6px}
.shop-row{display:flex;align-items:center;gap:10px;padding:12px;background:var(--bg);border-radius:var(--r)}
.shop-row span{flex:1;font-size:14px}
.shop-row button{width:32px;height:32px;border:none;background:var(--bg3);border-radius:6px;font-size:14px;cursor:pointer}
.emoji-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:4px}
.emoji-btn{aspect-ratio:1;border:2px solid transparent;background:none;border-radius:6px;font-size:18px;cursor:pointer}
.emoji-btn.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.scanner{width:100%;aspect-ratio:1;background:#000;border-radius:var(--r);overflow:hidden;margin-bottom:12px}
#scannerView{width:100%;height:100%}
#scannerView video{width:100%!important;height:100%!important;object-fit:cover!important}
.detail-head{display:flex;gap:12px;margin-bottom:16px}
.detail-img{width:70px;height:70px;background:var(--bg3);border-radius:var(--r);display:flex;align-items:center;justify-content:center;font-size:32px;overflow:hidden}
.detail-img img{width:100%;height:100%;object-fit:contain;background:#fff}
.detail-info h3{font-size:16px;margin-bottom:4px}
.detail-info p{font-size:13px;color:var(--text2)}
.detail-section{margin-bottom:16px}
.detail-section h4{font-size:11px;color:var(--text3);text-transform:uppercase;margin-bottom:8px}
.nutri-row{display:flex;align-items:center;gap:10px}
.nutri-badge{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;color:#fff}
.nutri-badge.a{background:#038141}.nutri-badge.b{background:#85bb2f}.nutri-badge.c{background:#fecb02;color:#333}.nutri-badge.d{background:#ee8100}.nutri-badge.e{background:#e63e11}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.info-item{padding:10px;background:var(--bg);border-radius:var(--r)}
.info-item small{display:block;font-size:10px;color:var(--text3);text-transform:uppercase}
.info-item strong{font-size:15px}
.tags{display:flex;flex-wrap:wrap;gap:4px}
.tag{padding:4px 10px;background:rgba(239,68,68,.15);color:#f87171;border-radius:12px;font-size:11px}
.pkg-row{display:flex;justify-content:space-between;padding:10px;background:var(--bg);border-radius:var(--r);margin-bottom:6px;font-size:13px}
.pkg-row span:last-child{font-weight:600}
.dialog{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.7);opacity:0;pointer-events:none;z-index:200}
.dialog.active{opacity:1;pointer-events:auto}
.dialog-box{width:280px;background:var(--bg2);border-radius:14px;padding:20px;text-align:center}
.dialog-box p{margin-bottom:14px;font-size:15px}
.dialog-box input{width:100%;height:44px;padding:0 12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:15px;text-align:center;margin-bottom:14px;display:none}
.dialog-box input.show{display:block}
.dialog-btns{display:flex;gap:10px}
.dialog-btns button{flex:1;height:42px;border:none;border-radius:var(--r);font-size:14px;font-weight:500;cursor:pointer}
#dialogNo{background:var(--bg3);color:var(--text)}
#dialogYes{background:var(--accent);color:#000}
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(40px);padding:10px 20px;background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);font-size:13px;opacity:0;transition:.2s;z-index:300}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}
.no-data{text-align:center;padding:20px;color:var(--text3);font-size:13px}
