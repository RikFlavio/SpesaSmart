:root{--bg:#0a0a0f;--bg2:#151519;--bg3:#1e1e24;--border:rgba(255,255,255,.1);--text:#fff;--text2:rgba(255,255,255,.6);--text3:rgba(255,255,255,.35);--accent:#22c55e;--danger:#ef4444;--r:10px}
[data-theme=light]{--bg:#f5f5f7;--bg2:#fff;--bg3:#e8e8ed;--border:rgba(0,0,0,.08);--text:#000;--text2:rgba(0,0,0,.6);--text3:rgba(0,0,0,.35)}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden}
body{font-family:Inter,-apple-system,sans-serif;background:var(--bg);color:var(--text);font-size:15px}
.app{display:flex;flex-direction:column;height:100%;padding-bottom:env(safe-area-inset-bottom)}
.header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:var(--bg2);border-bottom:1px solid var(--border)}
.header h1{font-size:18px;font-weight:600}
.header h1 span{color:var(--accent)}
.icon-btn{width:40px;height:40px;border:none;background:var(--bg3);border-radius:var(--r);font-size:18px;cursor:pointer}
.search-bar{display:flex;gap:8px;padding:10px 16px;background:var(--bg2);border-bottom:1px solid var(--border)}
.search-bar input{flex:1;height:40px;padding:0 12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:14px}
.search-bar input:focus{outline:none;border-color:var(--accent)}
.search-bar select{height:40px;padding:0 10px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:13px;min-width:90px}
.pull-indicator{text-align:center;padding:12px;color:var(--accent);font-size:13px;font-weight:500;display:none}
.pull-indicator.visible{display:block}
.pull-indicator.loading{color:var(--text2)}
.main{flex:1;overflow-y:auto;padding:12px 16px}
.empty{text-align:center;padding:60px 20px;color:var(--text3)}
.empty span{font-size:48px;display:block;margin-bottom:10px}
.item{display:flex;align-items:center;background:var(--bg2);border-radius:var(--r);margin-bottom:8px;overflow:hidden}
.item-check{width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--text3);cursor:pointer}
.item-check:active{background:var(--bg3)}
.item.done .item-check{color:var(--accent)}
.item-name{flex:1;padding:0 12px;font-size:14px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.item-name:active{background:var(--bg3)}
.item.done .item-name{text-decoration:line-through;opacity:.5}
.item-qty{display:flex;align-items:center}
.qty-btn{width:40px;height:48px;border:none;background:none;color:var(--text);font-size:20px;cursor:pointer}
.qty-btn:active{background:var(--bg3)}
.qty-val{width:24px;text-align:center;font-weight:600}
.footer{display:flex;gap:10px;padding:12px 16px;background:var(--bg2);border-top:1px solid var(--border)}
.btn{flex:1;height:48px;border:none;background:var(--accent);border-radius:var(--r);color:#000;font-size:14px;font-weight:600;cursor:pointer}
.btn:active{opacity:.85}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;transition:.2s;z-index:100}
.overlay.active{opacity:1;pointer-events:auto}
.modal{position:fixed;left:0;right:0;bottom:0;max-height:88vh;background:var(--bg2);border-radius:16px 16px 0 0;transform:translateY(100%);transition:.25s;z-index:101;display:flex;flex-direction:column}
.modal.active{transform:translateY(0)}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border);font-weight:600}
.close{width:32px;height:32px;border:none;background:var(--bg3);border-radius:8px;font-size:16px;cursor:pointer;color:var(--text2)}
.modal-body{padding:16px;overflow-y:auto;flex:1}
.form-group{margin-bottom:14px}
.form-group label{display:block;font-size:12px;color:var(--text2);margin-bottom:6px}
.form-group input[type=text]{width:100%;height:44px;padding:0 12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:15px}
.form-group input:focus{outline:none;border-color:var(--accent)}
.cat-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
.cat-item{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);border:2px solid var(--border);border-radius:var(--r);cursor:pointer;font-size:20px}
.cat-item span{font-size:9px;color:var(--text3);margin-top:2px}
.cat-item.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.shop-grid{display:flex;flex-wrap:wrap;gap:6px}
.shop-chip{padding:8px 12px;background:var(--bg);border:2px solid var(--border);border-radius:20px;cursor:pointer;font-size:13px}
.shop-chip.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.btn-primary{width:100%;height:48px;border:none;background:var(--accent);border-radius:var(--r);color:#000;font-size:15px;font-weight:600;cursor:pointer;margin-top:10px}
.btn-outline{width:100%;height:44px;border:1px solid var(--border);background:none;border-radius:var(--r);color:var(--text);font-size:14px;cursor:pointer;margin-top:10px}
.btn-link{border:none;background:none;color:var(--accent);font-size:13px;cursor:pointer;padding:8px 0}
.setting{display:flex;align-items:center;gap:10px;width:100%;padding:14px;background:var(--bg);border:none;border-radius:var(--r);color:var(--text);font-size:14px;cursor:pointer;margin-bottom:6px;text-align:left}
.setting:active{background:var(--bg3)}
.setting.danger{color:var(--danger)}
.setting input{display:none}
.shop-row{display:flex;align-items:center;gap:10px;padding:12px;background:var(--bg);border-radius:var(--r);margin-bottom:6px}
.shop-row span{flex:1}
.shop-row button{width:32px;height:32px;border:none;background:var(--bg3);border-radius:6px;font-size:14px;cursor:pointer}
.emoji-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:4px}
.emoji-btn{aspect-ratio:1;border:2px solid transparent;background:none;border-radius:6px;font-size:18px;cursor:pointer}
.emoji-btn.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.scanner{width:100%;aspect-ratio:1;background:#000;border-radius:var(--r);overflow:hidden;margin-bottom:12px}
#scannerView{width:100%;height:100%}
#scannerView video{width:100%!important;height:100%!important;object-fit:cover!important}
.detail-section{margin-bottom:16px}
.detail-section h4{font-size:11px;color:var(--text3);text-transform:uppercase;margin-bottom:8px}
.detail-row{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg);border-radius:var(--r);margin-bottom:6px}
.detail-row span:first-child{flex:1;font-size:14px}
.detail-row .price{color:var(--accent);font-weight:600}
.detail-row button{width:28px;height:28px;border:none;background:var(--bg3);border-radius:6px;font-size:12px;cursor:pointer;color:var(--text3)}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.info-item{padding:10px;background:var(--bg);border-radius:var(--r)}
.info-item small{display:block;font-size:10px;color:var(--text3)}
.info-item strong{font-size:15px}
.nutri-row{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg);border-radius:var(--r)}
.nutri-badge{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;color:#fff}
.nutri-badge.a{background:#038141}.nutri-badge.b{background:#85bb2f}.nutri-badge.c{background:#fecb02;color:#333}.nutri-badge.d{background:#ee8100}.nutri-badge.e{background:#e63e11}
.dialog{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.7);opacity:0;pointer-events:none;z-index:200}
.dialog.active{opacity:1;pointer-events:auto}
.dialog-box{width:280px;background:var(--bg2);border-radius:14px;padding:20px;text-align:center}
.dialog-box p{margin-bottom:14px}
.dialog-box input{width:100%;height:44px;padding:0 12px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:15px;text-align:center;margin-bottom:14px;display:none}
.dialog-box input.show{display:block}
.dialog-btns{display:flex;gap:10px}
.dialog-btns button{flex:1;height:42px;border:none;border-radius:var(--r);font-size:14px;cursor:pointer}
#dialogNo{background:var(--bg3);color:var(--text)}
#dialogYes{background:var(--accent);color:#000}
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(30px);padding:10px 20px;background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);font-size:13px;opacity:0;transition:.2s;z-index:300}
.toast.show{transform:translateX(-50%);opacity:1}
.no-data{text-align:center;padding:16px;color:var(--text3);font-size:13px}
.detail-edit-row{display:flex;gap:8px;align-items:center}
.edit-input{flex:1;height:40px;padding:0 10px;background:var(--bg);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-size:15px}
.edit-input:focus{outline:none;border-color:var(--accent)}
.detail-edit-row button{width:40px;height:40px;border:none;background:var(--accent);border-radius:var(--r);font-size:16px;cursor:pointer}
.detail-info-small{font-size:12px;color:var(--text3);margin-top:6px}
.cat-grid-small{display:grid;grid-template-columns:repeat(5,1fr);gap:5px}
.cat-item-small{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);border:2px solid var(--border);border-radius:8px;cursor:pointer;font-size:18px}
.cat-item-small span{font-size:8px;color:var(--text3);margin-top:1px}
.cat-item-small.sel{border-color:var(--accent);background:rgba(34,197,94,.1)}
.price-table{width:100%;border-collapse:collapse;font-size:13px}
.price-table th{text-align:left;padding:8px 6px;border-bottom:1px solid var(--border);color:var(--text3);font-weight:500;font-size:11px;text-transform:uppercase}
.price-table td{padding:6px;border-bottom:1px solid var(--border)}
.price-table td:first-child{font-size:13px}
.price-input{width:70px;height:32px;padding:0 8px;background:var(--bg);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;text-align:right}
.price-input:focus{outline:none;border-color:var(--accent)}
.price-save{width:32px;height:32px;border:none;background:var(--accent);border-radius:6px;font-size:14px;cursor:pointer}
